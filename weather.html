<html>
<head>
	<title>Yahoo氣象API練習</title>
</head>
<body>
	<div id="home" data-role="page">
		<div data-role="header" data-position="fixed" data-theme="b">
			<h3></h3>
		</div>
		<select id="area">
			<option value="2306179">台北</option>
			<option value="2306188">基隆</option>
			<option value="2306181">台中</option>
			<option value="2306195">彰化</option>
			<option value="2306187">花蓮</option>
		</select>
		<div id="content"></div>
	</div>
</body>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	//預設台北
	weather('2306179');
});
$('#area').bind('input propertychange',function(){
	weather($('#area').val());
});
function weather(code) {
	var weather, title, content,
	rss = 'http://weather.yahooapis.com/forecastrss?w='+code+'&u=c',
	url = 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q=' + encodeURIComponent(rss);
	$.ajax({
		type: "GET",
		url: url,
		dataType: "json",
		error: function (e) {
			console.log('error');
		},
		success: function (e) {
			console.log(e);
			weather = $(e);
			content = weather[0].responseData.feed.entries[0].content;
			//會印出<img src="..."><br><b>Current Conditions:</b><br>Mostly Cloudy, 30 C<br>
			var w_img = content.split("<br>")[0];
			var w_current = content.split("<br>")[2];
			$('#content').html(w_img+w_current);
		}
	});
}
</script>
</html>